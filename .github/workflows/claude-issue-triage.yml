name: Claude Issue Triage

on:
  issues:
    types: [opened]

jobs:
  triage:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Triage Issue with Claude
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          model: "claude-sonnet-4-20250514"

          prompt: |
            ìƒˆë¡œ ìƒì„±ëœ ì´ìŠˆë¥¼ ë¶„ì„í•˜ê³  ë¶„ë¥˜í•´ì£¼ì„¸ìš”.

            ## ë¶„ì„ í•­ëª©
            1. **ì´ìŠˆ ìœ í˜• íŒë‹¨**
               - bug: ê¸°ì¡´ ê¸°ëŠ¥ ì˜¤ì‘ë™
               - feature: ìƒˆ ê¸°ëŠ¥ ìš”ì²­
               - enhancement: ê¸°ì¡´ ê¸°ëŠ¥ ê°œì„ 
               - documentation: ë¬¸ì„œ ê´€ë ¨
               - question: ì§ˆë¬¸

            2. **ìš°ì„ ìˆœìœ„ íŒë‹¨**
               - P0 (Critical): ì„œë¹„ìŠ¤ ì¤‘ë‹¨, ë³´ì•ˆ ì·¨ì•½ì 
               - P1 (High): í•µì‹¬ ê¸°ëŠ¥ ë¬¸ì œ
               - P2 (Medium): ì¼ë°˜ì ì¸ ë²„ê·¸/ê¸°ëŠ¥
               - P3 (Low): ì‚¬ì†Œí•œ ê°œì„ ì‚¬í•­

            3. **ê´€ë ¨ ì˜ì—­**
               - frontend, backend, database, api, auth, map, ai

            ## ì‘ë‹µ í˜•ì‹
            ì´ìŠˆì— ë‹¤ìŒ ë‚´ìš©ìœ¼ë¡œ ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”:

            ---
            ## ğŸ¤– ìë™ ë¶„ë¥˜ ê²°ê³¼

            | í•­ëª© | ê²°ê³¼ |
            |------|------|
            | ìœ í˜• | `{type}` |
            | ìš°ì„ ìˆœìœ„ | `{priority}` |
            | ì˜ì—­ | `{areas}` |

            ### ë¶„ì„ ìš”ì•½
            {ê°„ë‹¨í•œ ë¶„ì„ ë‚´ìš©}

            ### ì œì•ˆë˜ëŠ” ë ˆì´ë¸”
            `{labels}`

            ---
            _ì´ ë¶„ë¥˜ëŠ” AIê°€ ìë™ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤._

          allowed_tools: |
            Read
            Glob
            Grep
