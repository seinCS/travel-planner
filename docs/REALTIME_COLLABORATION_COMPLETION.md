# ì‹¤ì‹œê°„ í˜‘ì—… ì™„ì„± ê³„íš

> **ì‘ì„±ì¼**: 2026-01-25
> **ìƒíƒœ**: ì„¤ê³„ ì¤‘
> **ëª©í‘œ**: ì´ˆëŒ€ë°›ì€ ë©¤ë²„ê°€ ì‹¤ì œë¡œ í”„ë¡œì íŠ¸ë¥¼ í•¨ê»˜ í¸ì§‘í•  ìˆ˜ ìˆëŠ” ìƒíƒœ ì™„ì„±

---

## 1. í˜„ì¬ ìƒíƒœ ë¶„ì„

### âœ… ì™„ë£Œëœ ì¸í”„ë¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Realtime Infrastructure (ì™„ë£Œ)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  types/realtime.ts          â†’ íƒ€ì… ì •ì˜                      â”‚
â”‚  RealtimeClient.ts          â†’ Supabase ì±„ë„ ê´€ë¦¬            â”‚
â”‚  ServerBroadcast.ts         â†’ ì„œë²„â†’í´ë¼ì´ì–¸íŠ¸ ì´ë²¤íŠ¸ ë°œì†¡    â”‚
â”‚  useRealtimeSync.ts         â†’ SWR ìºì‹œ ë¬´íš¨í™”               â”‚
â”‚  usePresence.ts             â†’ ì˜¨ë¼ì¸ ì‚¬ìš©ì ì¶”ì             â”‚
â”‚  PresenceIndicator.tsx      â†’ ì ‘ì†ì ì•„ë°”íƒ€ UI              â”‚
â”‚  10ê°œ API ë¼ìš°íŠ¸            â†’ ë¸Œë¡œë“œìºìŠ¤íŠ¸ í˜¸ì¶œ ì¶”ê°€         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âŒ ëˆ„ë½ëœ ë¶€ë¶„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Missing Integration (ë¯¸ì™„ë£Œ)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ë©¤ë²„ ê¶Œí•œ ì²´í¬                                           â”‚
â”‚     í˜„ì¬: project.userId === session.user.id (ì˜¤ë„ˆë§Œ)        â”‚
â”‚     í•„ìš”: ì˜¤ë„ˆ OR í”„ë¡œì íŠ¸ ë©¤ë²„                              â”‚
â”‚                                                              â”‚
â”‚  2. UI í›… í†µí•©                                               â”‚
â”‚     í˜„ì¬: í›…ì€ ìˆìœ¼ë‚˜ í˜ì´ì§€ì—ì„œ ì‚¬ìš© ì•ˆí•¨                   â”‚
â”‚     í•„ìš”: í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ useRealtimeSync í˜¸ì¶œ      â”‚
â”‚                                                              â”‚
â”‚  3. Presence UI ë°°ì¹˜                                         â”‚
â”‚     í˜„ì¬: ì»´í¬ë„ŒíŠ¸ëŠ” ìˆìœ¼ë‚˜ ë°°ì¹˜ ì•ˆë¨                        â”‚
â”‚     í•„ìš”: í”„ë¡œì íŠ¸ í—¤ë”ì— PresenceIndicator ì¶”ê°€             â”‚
â”‚                                                              â”‚
â”‚  4. Supabase ì„¤ì • í™•ì¸                                       â”‚
â”‚     í•„ìš”: Supabase ëŒ€ì‹œë³´ë“œì—ì„œ Realtime í™œì„±í™” í™•ì¸         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ë¸Œë ˆì¸ìŠ¤í† ë°: í•µì‹¬ ì§ˆë¬¸

### Q1: ë©¤ë²„ ê¶Œí•œì€ ì–´ë””ê¹Œì§€?

**í˜„ì¬ ì—­í•  êµ¬ì¡°:**
```prisma
enum ProjectMemberRole {
  owner   // ì†Œìœ ì (Project.userIdì™€ ë™ì¼)
  member  // ì¼ë°˜ ë©¤ë²„ (ì´ˆëŒ€ë¡œ ì°¸ì—¬)
}
```

**ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ (ì œì•ˆ):**

| ê¸°ëŠ¥ | owner | member | ë¹„íšŒì› |
|------|-------|--------|--------|
| í”„ë¡œì íŠ¸ ì¡°íšŒ | âœ… | âœ… | âŒ |
| ì¥ì†Œ CRUD | âœ… | âœ… | âŒ |
| ì¼ì • CRUD | âœ… | âœ… | âŒ |
| í•­ê³µí¸/ìˆ™ì†Œ CRUD | âœ… | âœ… | âŒ |
| ì´ë¯¸ì§€ ì—…ë¡œë“œ | âœ… | âœ… | âŒ |
| ë©¤ë²„ ì´ˆëŒ€ | âœ… | âŒ | âŒ |
| ë©¤ë²„ ì œê±° | âœ… | âŒ | âŒ |
| í”„ë¡œì íŠ¸ ì‚­ì œ | âœ… | âŒ | âŒ |
| ì†Œìœ ê¶Œ ì´ì „ | âœ… | âŒ | âŒ |

### Q2: ì¶©ëŒ ì²˜ë¦¬ ì „ëµì€?

**ì˜µì…˜ A: Last-Write-Wins (LWW)** â† ê¶Œì¥
- ë§ˆì§€ë§‰ ì €ì¥ì´ ì´ê¹€
- êµ¬í˜„ ë‹¨ìˆœ
- ì†Œê·œëª¨ íŒ€ì— ì í•©

**ì˜µì…˜ B: Operational Transformation (OT)**
- Google Docs ìŠ¤íƒ€ì¼
- êµ¬í˜„ ë³µì¡
- ëŒ€ê·œëª¨ ë™ì‹œ í¸ì§‘ì— ì í•©

**ê²°ì •: LWW ì±„íƒ** (ì†Œê·œëª¨ ì—¬í–‰ ê·¸ë£¹ì— ì¶©ë¶„)

### Q3: Presence UI ìœ„ì¹˜ëŠ”?

```
Option A: í”„ë¡œì íŠ¸ í—¤ë” ìš°ì¸¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë„ì¿„ ì—¬í–‰                          [ğŸ‘¤ğŸ‘¤ğŸ‘¤+2] [ê³µìœ ] [ì„¤ì •] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Option B: ë³„ë„ íŒ¨ë„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í˜„ì¬ ì ‘ì† ì¤‘ (3ëª…)                                          â”‚
â”‚  ğŸŸ¢ ê¹€ì² ìˆ˜ (ë‚˜)  ğŸŸ¢ ì´ì˜í¬  ğŸŸ¢ ë°•ì§€ë¯¼                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°ì •: Option A (ê³µê°„ íš¨ìœ¨ì , ì§ê´€ì )
```

### Q4: ì–´ë–¤ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ ë™ê¸°í™”?

**í˜„ì¬ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì´ë²¤íŠ¸:**
- `item:created/updated/deleted` - ì¼ì • í•­ëª©
- `items:reordered` - ìˆœì„œ ë³€ê²½
- `flight:created/updated/deleted` - í•­ê³µí¸
- `accommodation:created/updated/deleted` - ìˆ™ì†Œ
- `place:created/updated/deleted` - ì¥ì†Œ
- `member:joined/left/updated` - ë©¤ë²„

**SWR ìºì‹œ ë¬´íš¨í™” ë§¤í•‘:**
```typescript
switch (event.type) {
  case 'itinerary:*':
  case 'item:*':
  case 'flight:*':
  case 'accommodation:*':
    mutate(`/api/projects/${projectId}/itinerary`)
    break
  case 'place:*':
    mutate(`/api/projects/${projectId}/places`)
    break
  case 'member:*':
    mutate(`/api/projects/${projectId}/members`)
    break
}
```

---

## 3. êµ¬í˜„ ìƒì„¸ ì„¤ê³„

### 3.1 ë©¤ë²„ ê¶Œí•œ ì²´í¬ ìœ í‹¸ë¦¬í‹°

**íŒŒì¼**: `lib/auth-utils.ts`

```typescript
import { prisma } from '@/lib/db'

/**
 * ì‚¬ìš©ìê°€ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ìˆ˜ì • ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
 * - í”„ë¡œì íŠ¸ ì†Œìœ ìì´ê±°ë‚˜
 * - í”„ë¡œì íŠ¸ ë©¤ë²„ì¸ ê²½ìš° true
 */
export async function canEditProject(
  projectId: string,
  userId: string
): Promise<boolean> {
  // 1. ì†Œìœ ì ì²´í¬
  const project = await prisma.project.findUnique({
    where: { id: projectId },
    select: { userId: true }
  })

  if (!project) return false
  if (project.userId === userId) return true

  // 2. ë©¤ë²„ ì²´í¬
  const member = await prisma.projectMember.findUnique({
    where: {
      projectId_userId: { projectId, userId }
    }
  })

  return !!member
}

/**
 * í”„ë¡œì íŠ¸ ê´€ë¦¬ ê¶Œí•œ (ì†Œìœ ìë§Œ)
 */
export async function canManageProject(
  projectId: string,
  userId: string
): Promise<boolean> {
  const project = await prisma.project.findUnique({
    where: { id: projectId },
    select: { userId: true }
  })

  return project?.userId === userId
}
```

### 3.2 API ê¶Œí•œ ì²´í¬ ì ìš©

**ìˆ˜ì • ëŒ€ìƒ API:**
- `/api/itinerary/[id]/items` (POST)
- `/api/itinerary/items/[itemId]` (PUT, DELETE)
- `/api/itinerary/[id]/flights` (POST)
- `/api/itinerary/flights/[flightId]` (PUT, DELETE)
- `/api/itinerary/[id]/accommodations` (POST)
- `/api/itinerary/accommodations/[accommodationId]` (PUT, DELETE)
- `/api/places/[id]` (PUT, PATCH, DELETE)

**ë³€ê²½ íŒ¨í„´:**
```typescript
// Before (ì˜¤ë„ˆë§Œ)
if (itinerary.project.userId !== session.user.id) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 403 })
}

// After (ì˜¤ë„ˆ OR ë©¤ë²„)
import { canEditProject } from '@/lib/auth-utils'

if (!await canEditProject(projectId, session.user.id)) {
  return NextResponse.json({ error: 'Unauthorized' }, { status: 403 })
}
```

### 3.3 í”„ë¡œì íŠ¸ í˜ì´ì§€ Realtime í†µí•©

**íŒŒì¼**: `app/(dashboard)/projects/[id]/page.tsx`

```typescript
// ì¶”ê°€í•  import
import { useRealtimeSync } from '@/hooks/realtime'
import { PresenceIndicator } from '@/components/realtime'

// ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€
function ProjectDetailPage({ params }) {
  const { id: projectId } = params

  // Realtime êµ¬ë… (SWR ìºì‹œ ìë™ ë¬´íš¨í™”)
  const { broadcast, isConnected } = useRealtimeSync(projectId)

  // ... ê¸°ì¡´ ì½”ë“œ ...

  return (
    <div>
      {/* í—¤ë”ì— Presence ì¶”ê°€ */}
      <header className="flex items-center justify-between">
        <h1>{project.name}</h1>
        <div className="flex items-center gap-4">
          <PresenceIndicator projectId={projectId} />
          {/* ê¸°ì¡´ ë²„íŠ¼ë“¤ */}
        </div>
      </header>

      {/* ì—°ê²° ìƒíƒœ í‘œì‹œ (ì„ íƒ) */}
      {isConnected && (
        <div className="text-xs text-green-500">â— ì‹¤ì‹œê°„ ë™ê¸°í™” ì¤‘</div>
      )}

      {/* ... ê¸°ì¡´ UI ... */}
    </div>
  )
}
```

### 3.4 Supabase ì„¤ì • í™•ì¸

**í™•ì¸ ì‚¬í•­:**
1. Supabase Dashboard â†’ Project Settings â†’ API
   - `NEXT_PUBLIC_SUPABASE_URL` í™•ì¸
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` í™•ì¸

2. Supabase Dashboard â†’ Database â†’ Replication
   - Realtime í™œì„±í™” ì—¬ë¶€ í™•ì¸

3. í™˜ê²½ ë³€ìˆ˜ (.env)
   ```
   NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
   SUPABASE_SERVICE_ROLE_KEY=xxx  # ì„œë²„ ë¸Œë¡œë“œìºìŠ¤íŠ¸ìš©
   ```

---

## 4. êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 6 ì™„ì„± ì‘ì—…

- [ ] `lib/auth-utils.ts` ìƒì„± (ê¶Œí•œ ì²´í¬ ìœ í‹¸ë¦¬í‹°)
- [ ] 8ê°œ API ë¼ìš°íŠ¸ì— ë©¤ë²„ ê¶Œí•œ ì²´í¬ ì ìš©
  - [ ] `/api/itinerary/[id]/items/route.ts`
  - [ ] `/api/itinerary/items/[itemId]/route.ts`
  - [ ] `/api/itinerary/[id]/reorder/route.ts`
  - [ ] `/api/itinerary/items/[itemId]/move/route.ts`
  - [ ] `/api/itinerary/[id]/flights/route.ts`
  - [ ] `/api/itinerary/flights/[flightId]/route.ts`
  - [ ] `/api/itinerary/[id]/accommodations/route.ts`
  - [ ] `/api/itinerary/accommodations/[accommodationId]/route.ts`
  - [ ] `/api/places/[id]/route.ts`
- [ ] í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì— `useRealtimeSync` í›… ì¶”ê°€
- [ ] í”„ë¡œì íŠ¸ í—¤ë”ì— `PresenceIndicator` ë°°ì¹˜
- [ ] Supabase Realtime ì„¤ì • í™•ì¸
- [ ] E2E í…ŒìŠ¤íŠ¸ ì‘ì„± (í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤)

---

## 5. ì˜ˆìƒ ì‘ì—…ëŸ‰

| ì‘ì—… | ì‹œê°„ |
|------|------|
| auth-utils.ts ìƒì„± | 15ë¶„ |
| API ê¶Œí•œ ì²´í¬ ì ìš© (8ê°œ) | 30ë¶„ |
| í”„ë¡œì íŠ¸ í˜ì´ì§€ í›… í†µí•© | 20ë¶„ |
| PresenceIndicator ë°°ì¹˜ | 10ë¶„ |
| Supabase ì„¤ì • í™•ì¸ | 10ë¶„ |
| í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ | 30ë¶„ |
| **ì´í•©** | **~2ì‹œê°„** |

---

## 6. ì„±ê³µ ê¸°ì¤€

1. **ë©¤ë²„ í¸ì§‘ ê°€ëŠ¥**: ì´ˆëŒ€ë°›ì€ ë©¤ë²„ê°€ ì¥ì†Œ/ì¼ì •ì„ ìˆ˜ì •í•  ìˆ˜ ìˆìŒ
2. **ì‹¤ì‹œê°„ ë™ê¸°í™”**: í•œ ë©¤ë²„ì˜ ë³€ê²½ì´ ë‹¤ë¥¸ ë©¤ë²„ì—ê²Œ ì¦‰ì‹œ ë°˜ì˜
3. **ì ‘ì†ì í‘œì‹œ**: í˜„ì¬ í”„ë¡œì íŠ¸ë¥¼ ë³´ê³  ìˆëŠ” ë©¤ë²„ ëª©ë¡ í™•ì¸ ê°€ëŠ¥
4. **E2E í…ŒìŠ¤íŠ¸ í†µê³¼**: í˜‘ì—… ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ í†µê³¼

---

## 7. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 7.1 ê¶Œí•œ ì²´í¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Request Flow                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Client Request                                                 â”‚
â”‚       â”‚                                                         â”‚
â”‚       â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚  API Route      â”‚                                            â”‚
â”‚  â”‚  (Next.js)      â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ getServerSessionâ”‚â”€â”€â”€â”€â–¶â”‚   NextAuth      â”‚                    â”‚
â”‚  â”‚ (ì¸ì¦ í™•ì¸)      â”‚     â”‚   session.user  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ canEditProject  â”‚â”€â”€â”€â”€â–¶â”‚   Prisma DB     â”‚                    â”‚
â”‚  â”‚ (ê¶Œí•œ í™•ì¸)      â”‚     â”‚   - Project     â”‚                    â”‚
â”‚  â”‚                 â”‚     â”‚   - Member      â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                               â”‚
â”‚     â”‚           â”‚                                               â”‚
â”‚     â–¼           â–¼                                               â”‚
â”‚  âœ… í—ˆìš©      âŒ 403                                             â”‚
â”‚  (ì²˜ë¦¬ê³„ì†)   (Forbidden)                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ì‹¤ì‹œê°„ ë™ê¸°í™” ë°ì´í„° í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Realtime Sync Flow                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  User A (Editor)              Supabase            User B (Viewer)
â”‚       â”‚                      Realtime                    â”‚      â”‚
â”‚       â”‚                         â”‚                        â”‚      â”‚
â”‚  1. Edit Item                   â”‚                        â”‚      â”‚
â”‚       â”‚                         â”‚                        â”‚      â”‚
â”‚       â–¼                         â”‚                        â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                        â”‚      â”‚
â”‚  â”‚ API Callâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ PUT/POSTâ”‚                    â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â”‚                               â”‚
â”‚       â”‚                         â”‚                               â”‚
â”‚       â–¼                         â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                               â”‚
â”‚  â”‚ Prisma  â”‚   2. Update DB     â”‚                               â”‚
â”‚  â”‚ Update  â”‚                    â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â”‚                               â”‚
â”‚       â”‚                         â”‚                               â”‚
â”‚       â–¼                         â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚                               â”‚
â”‚  â”‚ Realtime     â”‚  3. Broadcast â”‚                               â”‚
â”‚  â”‚ Broadcast    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                               â”‚
â”‚  â”‚ (Server)     â”‚               â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚                               â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â–¼                               â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                         â”‚ Supabase      â”‚                       â”‚
â”‚                         â”‚ Channel       â”‚                       â”‚
â”‚                         â”‚ project:{id}  â”‚                       â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â”‚  4. Push Event                â”‚
â”‚                                 â–¼                               â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                         â”‚ User B Client â”‚      â”‚ User C Client â”‚â”‚
â”‚                         â”‚ useRealtime   â”‚      â”‚ useRealtime   â”‚â”‚
â”‚                         â”‚ Sync          â”‚      â”‚ Sync          â”‚â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â–¼                               â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                         â”‚ SWR mutate()  â”‚  5. Cache Invalidationâ”‚
â”‚                         â”‚ ìºì‹œ ë¬´íš¨í™”    â”‚                       â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                 â”‚                               â”‚
â”‚                                 â–¼                               â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                         â”‚ UI Re-render  â”‚  6. í™”ë©´ ê°±ì‹           â”‚
â”‚                         â”‚ ìƒˆ ë°ì´í„° í‘œì‹œ â”‚                       â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Presence ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presence Architecture                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   User A    â”‚      â”‚   User B    â”‚      â”‚   User C    â”‚     â”‚
â”‚  â”‚   Client    â”‚      â”‚   Client    â”‚      â”‚   Client    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                    â”‚                    â”‚             â”‚
â”‚         â”‚    1. track()      â”‚    1. track()      â”‚             â”‚
â”‚         â–¼                    â–¼                    â–¼             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Supabase Presence                       â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Channel: project:{projectId}                            â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  presenceState: {                                        â”‚   â”‚
â”‚  â”‚    "user-a": [{ id, name, image, onlineAt }],           â”‚   â”‚
â”‚  â”‚    "user-b": [{ id, name, image, onlineAt }],           â”‚   â”‚
â”‚  â”‚    "user-c": [{ id, name, image, onlineAt }]            â”‚   â”‚
â”‚  â”‚  }                                                       â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â”‚  2. presence sync                   â”‚
â”‚                           â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ usePresence â”‚  â”‚ usePresence â”‚  â”‚ usePresence â”‚             â”‚
â”‚  â”‚   Hook A    â”‚  â”‚   Hook B    â”‚  â”‚   Hook C    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                â”‚                â”‚                     â”‚
â”‚         â–¼                â–¼                â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              PresenceIndicator Component                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  [ğŸ‘¤A] [ğŸ‘¤B] [ğŸ‘¤C]  3ëª… ì ‘ì† ì¤‘                   â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. UI/UX ì„¤ê³„

### 8.1 í”„ë¡œì íŠ¸ í—¤ë” (ë°ìŠ¤í¬í†±)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ë„ì¿„ 3ë°• 4ì¼ ì—¬í–‰                                            â”‚
â”‚  Tokyo, Japan                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [ğŸ“ ì¥ì†Œ] [ğŸ“… ì¼ì •] [âœˆï¸ í•­ê³µ/ìˆ™ì†Œ] [ğŸ‘¥ ë©¤ë²„]             â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚                              â”‚ ğŸŸ¢ ì‹¤ì‹œê°„ ë™ê¸°í™” ì¤‘   â”‚   â”‚   â”‚
â”‚  â”‚                              â”‚                      â”‚   â”‚   â”‚
â”‚  â”‚                              â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”    â”‚   â”‚   â”‚
â”‚  â”‚                              â”‚ â”‚ğŸ‘¤A â”‚ğŸ‘¤B â”‚+2 â”‚    â”‚   â”‚   â”‚
â”‚  â”‚                              â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜    â”‚   â”‚   â”‚
â”‚  â”‚                              â”‚ 4ëª… ì ‘ì† ì¤‘          â”‚   â”‚   â”‚
â”‚  â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚                                        [ê³µìœ ] [âš™ï¸ ì„¤ì •]  â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 í”„ë¡œì íŠ¸ í—¤ë” (ëª¨ë°”ì¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ë„ì¿„ 3ë°• 4ì¼         [ğŸ‘¥4] [â‹®]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŸ¢ ë™ê¸°í™” ì¤‘                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 Presence Indicator ìƒì„¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Presence Indicator States                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. í˜¼ì ì ‘ì† ì¤‘                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ ğŸ‘¤ (ë‚˜)         â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                 â”‚
â”‚  2. 2-5ëª… ì ‘ì† ì¤‘ (ëª¨ë‘ í‘œì‹œ)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ ğŸ‘¤A ğŸ‘¤B ğŸ‘¤C  3ëª… ì ‘ì† ì¤‘     â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                 â”‚
â”‚  3. 5ëª… ì´ˆê³¼ (ì¼ë¶€ + ì¹´ìš´íŠ¸)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ ğŸ‘¤A ğŸ‘¤B ğŸ‘¤C ğŸ‘¤D ğŸ‘¤E +3  8ëª… ì ‘ì† â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â”‚  4. Tooltip (í˜¸ë²„ ì‹œ)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ ğŸ‘¤A â†â”€â”€â”€â”                   â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚            â”‚                                                    â”‚
â”‚            â–¼                                                    â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ ê¹€ì² ìˆ˜         â”‚                                        â”‚
â”‚       â”‚ kim@email.com  â”‚                                        â”‚
â”‚       â”‚ ğŸŸ¢ ì˜¨ë¼ì¸      â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.4 ì‹¤ì‹œê°„ ë³€ê²½ í”¼ë“œë°±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Change Notification UI                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. Toast ì•Œë¦¼ (ë‹¤ë¥¸ ì‚¬ìš©ì ë³€ê²½ ì‹œ)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ‘¤ ì´ì˜í¬ë‹˜ì´ "ì„¼ì†Œì§€"ë¥¼ Day 2ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤ â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  2. í•­ëª© í•˜ì´ë¼ì´íŠ¸ (ë°©ê¸ˆ ë³€ê²½ëœ í•­ëª©)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ“ ì„¼ì†Œì§€                   â† ë…¸ë€ìƒ‰ ê¹œë¹¡ì„ â”‚                â”‚
â”‚  â”‚    ì•„ì‚¬ì¿ ì‚¬ | â° 10:00        (2ì´ˆê°„)     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â”‚  3. í¸ì§‘ ì¤‘ í‘œì‹œ (ì„ íƒì , Phase 2)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ“ ìŠ¤ì¹´ì´íŠ¸ë¦¬           âœï¸ ì´ì˜í¬ í¸ì§‘ ì¤‘ â”‚                   â”‚
â”‚  â”‚    (ë¹„í™œì„±í™”, í¸ì§‘ ë¶ˆê°€)                  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ì›Œí¬í”Œë¡œìš°

### 9.1 êµ¬í˜„ ìˆœì„œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Implementation Workflow                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Step 1: ê¶Œí•œ ì²´í¬ ìœ í‹¸ë¦¬í‹° (15ë¶„)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1.1 lib/auth-utils.ts ìƒì„±                               â”‚   â”‚
â”‚  â”‚ 1.2 canEditProject(), canManageProject() í•¨ìˆ˜ êµ¬í˜„        â”‚   â”‚
â”‚  â”‚ 1.3 TypeScript íƒ€ì… í™•ì¸                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  Step 2: API ê¶Œí•œ ì²´í¬ ì ìš© (30ë¶„)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2.1 itinerary items API (2ê°œ íŒŒì¼)                       â”‚   â”‚
â”‚  â”‚ 2.2 itinerary reorder/move API (2ê°œ íŒŒì¼)                â”‚   â”‚
â”‚  â”‚ 2.3 flights API (2ê°œ íŒŒì¼)                               â”‚   â”‚
â”‚  â”‚ 2.4 accommodations API (2ê°œ íŒŒì¼)                        â”‚   â”‚
â”‚  â”‚ 2.5 places API (1ê°œ íŒŒì¼)                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  Step 3: UI í†µí•© (30ë¶„)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3.1 í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ êµ¬ì¡° íŒŒì•…                         â”‚   â”‚
â”‚  â”‚ 3.2 useRealtimeSync í›… ì¶”ê°€                              â”‚   â”‚
â”‚  â”‚ 3.3 PresenceIndicator ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜                      â”‚   â”‚
â”‚  â”‚ 3.4 ì—°ê²° ìƒíƒœ í‘œì‹œ ì¶”ê°€                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  Step 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ (30ë¶„)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4.1 ë¹Œë“œ ì„±ê³µ í™•ì¸                                        â”‚   â”‚
â”‚  â”‚ 4.2 ë©¤ë²„ ì´ˆëŒ€ â†’ ìˆ˜ì • í…ŒìŠ¤íŠ¸                               â”‚   â”‚
â”‚  â”‚ 4.3 ì‹¤ì‹œê°„ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ (2ê°œ ë¸Œë¼ìš°ì €)                    â”‚   â”‚
â”‚  â”‚ 4.4 Presence í‘œì‹œ í™•ì¸                                    â”‚   â”‚
â”‚  â”‚ 4.5 E2E í…ŒìŠ¤íŠ¸ ì‹¤í–‰                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 íŒŒì¼ ìˆ˜ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Files to Modify                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âœ¨ ì‹ ê·œ ìƒì„±                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  [ ] lib/auth-utils.ts                                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”§ ìˆ˜ì • (ê¶Œí•œ ì²´í¬ ì¶”ê°€)                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  [ ] app/api/itinerary/[id]/items/route.ts                      â”‚
â”‚  [ ] app/api/itinerary/items/[itemId]/route.ts                  â”‚
â”‚  [ ] app/api/itinerary/[id]/reorder/route.ts                    â”‚
â”‚  [ ] app/api/itinerary/items/[itemId]/move/route.ts             â”‚
â”‚  [ ] app/api/itinerary/[id]/flights/route.ts                    â”‚
â”‚  [ ] app/api/itinerary/flights/[flightId]/route.ts              â”‚
â”‚  [ ] app/api/itinerary/[id]/accommodations/route.ts             â”‚
â”‚  [ ] app/api/itinerary/accommodations/[accommodationId]/route.tsâ”‚
â”‚  [ ] app/api/places/[id]/route.ts                               â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¨ ìˆ˜ì • (UI í†µí•©)                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  [ ] app/(dashboard)/projects/[id]/page.tsx                     â”‚
â”‚      ë˜ëŠ” í•´ë‹¹ ë ˆì´ì•„ì›ƒ/ì»´í¬ë„ŒíŠ¸                                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*ìµœì¢… ì—…ë°ì´íŠ¸: 2026-01-25*
